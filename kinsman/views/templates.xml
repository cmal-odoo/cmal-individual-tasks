<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- <template id="custom_product_quantity" inherit_id="website_sale.product_quantity">
    <xpath expr="//div[@t-attf-class='css_quantity input-group {{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} me-2 mb-2 align-middle #{'input-group-lg' if ctaSizeBig else ''}']" position="replace">
        <t t-if="not website.is_hide_price">
            <div t-attf-class="css_quantity input-group {{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} me-2 mb-2 align-middle #{'input-group-lg' if ctaSizeBig else ''}" contenteditable="false">
                <a t-attf-href="#" class="btn btn-link js_add_cart_json" aria-label="Remove one" title="Remove one">
                    <i class="fa fa-minus"></i>
                </a>
                <input type="text" class="form-control quantity text-center" data-min="1" name="add_qty" t-att-value="add_qty or 1"/>
                <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json" aria-label="Add one" title="Add one">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </t>
        <t t-else="">
            <div/>
        </t>
    </xpath>
</template> -->

    <!-- <template id="hide_o_wsale_cta_wrapper" inherit_id="website_sale.product">
        <xpath expr="//div[contains(@class, 'o_wsale_cta_wrapper')]" position="attributes">
            <attribute name="t-attf-class" add="{'d-none': website.is_hide_price}" separator=" "/>
        </xpath>
    </template> -->


    <template id="custom_product_price" inherit_id="website_sale.product_price">
        <xpath expr="//div[@itemprop='offers']" position="replace">
            <t t-if="not website.is_hide_price">
                <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" t-attf-class="product_price mt-2 mb-3 {{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-block'}}">
                    <h3 class="css_editable_mode_hidden">
                        <span class="oe_price" style="white-space: nowrap;" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        <span itemprop="price" style="display:none;" t-esc="combination_info['price']"/>
                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name"/>
                        <span t-attf-class="text-danger oe_default_price ms-1 h5 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;"
                            t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"
                            itemprop="listPrice"
                        />
                        <t t-if="is_view_active('website_sale.tax_indication')" t-call="website_sale.tax_indication"/>
                        <del t-if="product.compare_list_price">
                            <bdi dir="inherit">
                            <span t-field="product.compare_list_price"
                                groups="website_sale.group_product_price_comparison"
                                t-options='{
                                "widget": "monetary",
                                "display_currency": product.currency_id,
                            }'/>
                            </bdi>
                        </del>
                    </h3>
                    <h3 class="css_non_editable_mode_hidden decimal_precision" t-att-data-precision="str(website.currency_id.decimal_places)">
                        <span t-field="product.list_price"
                            t-options='{
                            "widget": "monetary",
                            "display_currency": product.currency_id,
                        }'/>
                        <t t-if="is_view_active('website_sale.tax_indication')" t-call="website_sale.tax_indication"/>
                        <del t-if="product.compare_list_price">
                            <bdi dir="inherit">
                            <span t-field="product.compare_list_price"
                                groups="website_sale.group_product_price_comparison"
                                t-options='{
                                    "widget": "monetary",
                                    "display_currency": product.currency_id,
                                }'/>
                            </bdi>
                        </del>
                    </h3>
                </div>
                <div id="product_unavailable" t-attf-class="{{'d-flex' if combination_info['prevent_zero_price_sale'] else 'd-none'}}">
                    <h3 class="fst-italic" t-field="website.prevent_zero_price_sale_text"/>
                </div>
            </t>
            <t t-else="">
                <div/>
            </t>
        </xpath>
    </template>


    <template id="custom_cart" inherit_id="website_sale.header_cart_link">
        <xpath expr="//t" position="replace">
            <t t-if="not website.is_hide_price">
                <t t-nocache="The number of products is dynamic, this rendering cannot be cached."
                t-nocache-_icon="_icon"
                t-nocache-_text="_text"
                t-nocache-_item_class="_item_class"
                t-nocache-_link_class="_link_class">
                    <t t-set="website_sale_cart_quantity" t-value="request.session['website_sale_cart_quantity'] if 'website_sale_cart_quantity' in request.session else website.sale_get_order().cart_quantity or 0"/>
                    <t t-set="show_cart" t-value="true"/>
                    <li t-attf-class="#{_item_class} divider d-none"/> <!-- Make sure the cart and related menus are not folded (see autohideMenu) -->
                    <li t-attf-class="o_wsale_my_cart align-self-md-start #{not show_cart and 'd-none'} #{_item_class}">
                        <a href="/shop/cart" t-attf-class="#{_link_class}">
                            <i t-if="_icon" class="fa fa-shopping-cart"/>
                            <span t-if="_text">My Cart</span>
                            <sup class="my_cart_quantity badge text-bg-primary" t-esc="website_sale_cart_quantity" t-att-data-order-id="request.session.get('sale_order_id', '')"/>
                        </a>
                    </li>
                </t>
            </t>
            <t t-else="">
                <div/>
            </t>
        </xpath>
    </template>

</odoo>
